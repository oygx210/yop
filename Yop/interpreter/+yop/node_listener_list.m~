classdef node_listener_list < yop.list

    methods
        function obj = node_listener_list()
        end
        
        function obj = add(obj, object, listener)
            
            if isempty(obj.elements)
                listener = addlistener(obj, 'value', 'PostSet', @object.clear);
                obj.elements = yop.node_listener_list_elem(object, listener);
            else
                if obj.contains(object)
                    listener = addlistener(obj, 'value', 'PostSet', @parent.clear);
                    obj.elements(end+1) = new_elem;
                end
            end
        end
        
        function obj = remove(obj, e)
            for k=1:size(obj.elem, 2)
                if isequal(obj.elements(k).object, e)
                    delete(obj.elements(k).listener);
                    obj.elem = obj.elements([1:k-1, k+1:size(obj.elements,2)]);
                    break
                end
            end
        end
        
    end
end